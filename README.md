# æ–‡ä»¶åˆ†äº«ç³»ç»Ÿ

ä¸€ä¸ªé«˜æ•ˆã€å®‰å…¨çš„æ–‡ä»¶åˆ†äº«å·¥å…·ï¼Œæ”¯æŒç½‘é¡µç«¯å’Œæ¡Œé¢ç«¯ï¼Œæä¾›æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€ç®¡ç†ç­‰åŠŸèƒ½ã€‚

## ğŸ“‹ åŠŸèƒ½ç‰¹ç‚¹

### æ ¸å¿ƒåŠŸèƒ½
- ğŸŒ **å±€åŸŸç½‘æ–‡ä»¶å…±äº«**ï¼šå¿«é€Ÿåœ¨å±€åŸŸç½‘å†…åˆ†äº«æ–‡ä»¶
- ğŸ“¤ **æ–‡ä»¶ä¸Šä¼ **ï¼šæ”¯æŒå•ä¸ªæˆ–æ‰¹é‡æ–‡ä»¶æ‹–æ”¾ä¸Šä¼ 
- ğŸ“¥ **æ–‡ä»¶ä¸‹è½½**ï¼šç›´æ¥ä»æµè§ˆå™¨ä¸‹è½½å…±äº«æ–‡ä»¶
- ğŸ“‹ **æ–‡ä»¶ç®¡ç†**ï¼šæŸ¥çœ‹ã€åˆ é™¤å·²ä¸Šä¼ çš„æ–‡ä»¶
- ğŸ“ **æ–‡æœ¬æ¶ˆæ¯åˆ†äº«**ï¼šæ”¯æŒçº¯æ–‡æœ¬å†…å®¹åˆ†äº«
- ğŸ“¦ **ç›®å½•å‹ç¼©ä¸‹è½½**ï¼šæ”¯æŒæ•´ä¸ªç›®å½•æ‰“åŒ…ä¸‹è½½
- ğŸ¯ **å®æ—¶äº‹ä»¶æ¨é€**ï¼šä½¿ç”¨SSEå®ç°å®æ—¶æ–‡ä»¶çŠ¶æ€æ›´æ–°

### ç³»ç»Ÿç‰¹æ€§
- ğŸš€ **é«˜æ€§èƒ½ä¼ è¾“**ï¼šé«˜æ•ˆçš„æ–‡ä»¶ä¼ è¾“æœºåˆ¶ï¼Œæ”¯æŒå¤§æ–‡ä»¶
- ğŸ”’ **å¯é€‰å¯†ç è®¤è¯**ï¼šå¢å¼ºå®‰å…¨æ€§
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡è®¿é—®
- ğŸ”§ **çµæ´»é…ç½®é€‰é¡¹**ï¼šç«¯å£ã€ä¸Šä¼ è·¯å¾„ç­‰å‡å¯è‡ªå®šä¹‰
- ğŸ’» **åå°è¿è¡Œ**ï¼šæ”¯æŒæœåŠ¡åœ¨åå°ç¨³å®šè¿è¡Œ

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ backend/              # å®Œæ•´ç‰ˆåç«¯æœåŠ¡
â”œâ”€â”€ file-share-web-only/  # ç‹¬ç«‹ç½‘é¡µç‰ˆæœ¬ï¼ˆç²¾ç®€ç‰ˆï¼‰
â”‚   â”œâ”€â”€ backend/          # ç²¾ç®€ç‰ˆåç«¯
â”‚   â””â”€â”€ page_web/         # ç²¾ç®€ç‰ˆå‰ç«¯
â””â”€â”€ page_web/             # å®Œæ•´ç‰ˆå‰ç«¯
```

## ğŸ›  æŠ€æœ¯æ ˆ

### åç«¯
- Node.js
- Express
- Multer (æ–‡ä»¶ä¸Šä¼ )
- SSE (Server-Sent Events)

### å‰ç«¯
- Vue 3
- Element Plus
- Axios
- Vite

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Node.js**: 14.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm**: 6.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **æ¨è**: Node.js 18+

## ğŸš€ ä½¿ç”¨æŒ‡å—

### ç‹¬ç«‹ç½‘é¡µç‰ˆæœ¬ï¼ˆæ¨èï¼‰

```bash
# è¿›å…¥ç›®å½•
cd file-share-web-only/backend

# å®‰è£…ä¾èµ–
npm install

# å‰å°å¯åŠ¨æœåŠ¡
npm start

# åå°å¯åŠ¨æœåŠ¡
npm run start-bg

# åœæ­¢åå°æœåŠ¡
npm run stop
```

### å®Œæ•´ç‰ˆé¡¹ç›®

```bash
# è¿›å…¥ç›®å½•
cd backend

# å®‰è£…ä¾èµ–
npm install

# å‰å°å¯åŠ¨æœåŠ¡
npm start

# åå°å¯åŠ¨æœåŠ¡
npm run run-bg

# åå°å¯åŠ¨ï¼ˆè·³è¿‡å‰ç«¯æ„å»ºï¼‰
npm run run-bg-no-build

# åœæ­¢åå°æœåŠ¡
npm run stop
```

## ğŸ“¦ æ‰“åŒ…å‘½ä»¤

### ç‹¬ç«‹ç½‘é¡µç‰ˆæœ¬æ‰“åŒ…

```bash
# è¿›å…¥ç›®å½•
cd file-share-web-only/backend

# æ„å»ºéƒ¨ç½²åŒ…
npm run build-deploy-prod

# æ‰“åŒ…åå¯åŠ¨æœåŠ¡
cd dist/backend
node run.js --start
# æˆ–åå°è¿è¡Œ
node run.js --start --background
```

### å®Œæ•´ç‰ˆé¡¹ç›®æ‰“åŒ…

```bash
# è¿›å…¥ç›®å½•
cd backend

# ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²
npm run build-deploy-prod
# éƒ¨ç½²åŒ…ä½äº dist/file-share-package.tar.gz
```

## âš™ï¸ é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶ä½ç½®
- **Linux/Mac**: `~/.file-share-backend/storage.json`
- **Windows**: `%USERPROFILE%\.file-share-backend\storage.json`

### é…ç½®ç¤ºä¾‹
```json
{
  "port": 5421,
  "uploadPath": "~/Downloads",
  "authEnable": false,
  "password": "",
  "autoStart": true
}
```

### å‘½ä»¤è¡Œå‚æ•°
- `--start`: è‡ªåŠ¨å¯åŠ¨æœåŠ¡å™¨
- `--port <ç«¯å£å·>`: è®¾ç½®æœåŠ¡å™¨ç«¯å£ (é»˜è®¤: 5421)
- `--upload-path <è·¯å¾„>`: è®¾ç½®æ–‡ä»¶ä¸Šä¼ è·¯å¾„
- `--auth --password <å¯†ç >`: å¯ç”¨è®¤è¯å¹¶è®¾ç½®å¯†ç 
- `--background`, `-b`: åå°è¿è¡Œæ¨¡å¼

## ğŸ”§ å¼€å‘è¯´æ˜

### å‰ç«¯å¼€å‘

```bash
# å®Œæ•´ç‰ˆå‰ç«¯
cd page_web
npm install
npm run dev

# ç²¾ç®€ç‰ˆå‰ç«¯
cd file-share-web-only/page_web
npm install
npm run dev
```

### åç«¯å¼€å‘

```bash
# å®Œæ•´ç‰ˆåç«¯
cd backend
npm install
npm run dev

# ç²¾ç®€ç‰ˆåç«¯
cd file-share-web-only/backend
npm install
npm run dev
```

## ğŸŒ éƒ¨ç½²æŒ‡å—

### ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²

1. **æ„å»ºéƒ¨ç½²åŒ…**
```bash
cd backend  # æˆ– cd file-share-web-only/backend
npm run build-deploy-prod
```

2. **æœåŠ¡å™¨é…ç½®**
```bash
# å®‰è£…Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# éƒ¨ç½²åº”ç”¨
sudo mkdir -p /opt/file-share
sudo chown $USER:$USER /opt/file-share
tar -xzf file-share-package.tar.gz -C /opt/file-share --strip-components=1
cd /opt/file-share
npm ci --only=production

# åˆ›å»ºä¸Šä¼ ç›®å½•
mkdir -p uploads

# å¯åŠ¨æœåŠ¡
# å‰å°: npm start
# åå°: nohup npm start > /dev/null 2>&1 &
# ä½¿ç”¨PM2: pm2 start ecosystem.config.js
```

## ğŸ›¡ï¸ å®‰å…¨å»ºè®®

1. å¯ç”¨èº«ä»½éªŒè¯
2. ä½¿ç”¨HTTPS (é…ç½®SSLè¯ä¹¦)
3. å®šæœŸå¤‡ä»½æ•°æ®
4. é™åˆ¶ä¸Šä¼ æ–‡ä»¶ç±»å‹å’Œå¤§å°
5. å®šæœŸæ›´æ–°ä¾èµ–åŒ…

## ğŸ“„ è®¸å¯è¯

MIT License