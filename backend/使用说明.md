# File Share Backend 使用说明

## 🎉 成功转换！

你的uTools插件已经成功转换为独立的Node.js后端服务！

## 🚀 快速启动

### 1. 安装依赖
```bash
cd backend
npm install
```

### 2. 启动服务
```bash
# 最简单的方式
npm run run

# 或者直接启动
node start.js
```

### 3. 访问服务
打开浏览器访问显示的地址，例如：
```
http://192.168.6.167:5421
```

## 📋 启动方式对比

| 方式 | 命令 | 说明 |
|------|------|------|
| **推荐** | `npm run run` | 前台启动，可看到日志 |
| 后台运行 | `npm run run-bg` | 后台启动，不占用终端 |
| 停止后台 | `npm run stop` | 停止后台运行的服务 |
| 直接启动 | `node start.js` | 直接启动脚本 |
| 快速启动 | `npm run quick-start` | 快速启动 |
| 开发模式 | `npm run dev` | 开发模式，自动重启 |

## ⚙️ 自定义配置

```bash
# 指定端口
node src/index.js --port 8080 --start

# 指定上传路径
node src/index.js --upload-path "D:\MyFiles" --start

# 启用密码认证
node src/index.js --auth --password mypassword --start

# 组合使用
node src/index.js --port 8080 --upload-path "D:\MyFiles" --auth --password secret --start
```

## 🔧 主要功能

- ✅ **文件上传下载**: 支持拖拽上传，一键下载
- ✅ **文本分享**: 发送文本消息到局域网
- ✅ **目录压缩**: 自动压缩文件夹下载
- ✅ **实时更新**: 文件列表实时同步
- ✅ **密码保护**: 可选的访问认证
- ✅ **跨平台**: 支持Windows、Linux、Mac

## 📁 默认设置

- **端口**: 5421
- **上传路径**: `C:\Users\用户名\Downloads`
- **访问地址**: `http://局域网IP:5421`
- **认证**: 默认禁用（无密码）

## 🌐 网络访问

启动后，局域网内的其他设备可以通过显示的IP地址访问：
- 手机、平板等移动设备
- 其他电脑
- 智能电视等设备

## 🛑 停止服务

### 前台运行
按 `Ctrl + C` 停止

### 后台运行
```bash
npm run stop
# 或
node stop.js
```

## 📝 日志和配置

- **配置文件**: `~/.file-share-backend/storage.json`
- **临时文件**: 系统临时目录
- **上传文件**: 配置的上传路径

## 🔍 故障排除

### 端口被占用
```bash
node src/index.js --port 8080 --start
```

### 权限问题
确保上传路径有写入权限

### 网络访问问题
- 检查防火墙设置
- 确认IP地址正确
- 验证端口是否开放

## 🎯 与原uTools版本的区别

| 功能 | uTools版本 | 独立版本 |
|------|------------|----------|
| 启动方式 | uTools插件 | 命令行启动 |
| 配置存储 | uTools数据库 | 本地JSON文件 |
| 生命周期 | uTools管理 | 独立进程管理 |
| 部署方式 | 插件安装 | 标准Node.js应用 |
| 跨平台 | 依赖uTools | 原生支持 |

## 💡 使用建议

1. **首次使用**: 建议使用 `npm run run` 前台启动，观察日志
2. **日常使用**: 可以使用 `npm run run-bg` 后台启动
3. **安全考虑**: 在生产环境建议启用密码认证
4. **性能优化**: 可以根据需要调整端口和上传路径

## 🆘 获取帮助

```bash
# 查看帮助信息
node src/index.js --help

# 运行测试
npm run test
```

---

**🎉 恭喜！你现在拥有了一个完全独立的文件共享服务！**
